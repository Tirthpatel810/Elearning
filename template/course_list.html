{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courses - eLearning App</title>
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <style>
        /* Basic styles for the course cards */
        .course-card {
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 12px;
            margin: 16px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            background-color: #f9f9f9; /* Light background color */
            max-width: 250px; /* Smaller card width */
        }
    
        .course-card:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
    
        .course-thumbnail {
            width: 100%;
            height: 140px; /* Adjusted height for smaller cards */
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 8px;
        }
    
        .course-price {
            font-size: 1.2em; /* Adjusted font size */
            color: #28a745; /* Green color for price */
            font-weight: bold;
        }
    
        .course-discount {
            color: #dc3545; /* Red color for discount */
            text-decoration: line-through;
            font-size: 0.9em;
        }
    
        /* Added color to the card */
        .course-card:nth-child(odd) {
            background-color: #e7f1ff; /* Light blue for odd cards */
        }
    
        .course-card:nth-child(even) {
            background-color: #ffe7e7; /* Light red for even cards */
        }
    
        .search-sort-container {
            margin: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    
        .search-sort-container input {
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
            width: 300px;
            transition: border-color 0.3s;
        }
    
        .search-sort-container input:focus {
            border-color: #007bff;
            outline: none;
        }
    
        .search-sort-container select {
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
            transition: border-color 0.3s;
        }
    
        .search-sort-container select:focus {
            border-color: #007bff;
            outline: none;
        }
    </style>
    
</head>
<body>

    <nav class="navbar">
        <div class="navbar-logo">
            <a href="#">ELearning</a>
        </div>
        <ul class="navbar-links">
            <li><a href="{% url 'home' %}">Home</a></li>
            <li><a href="{% url 'course_list' %}">Courses</a></li>
            <li><a href="{% url 'my_courses' %}">My Courses</a></li>
        </ul>
        <div class="navbar-search">
            <input type="text" placeholder="Search Courses...">
            <button type="button">Search</button>
        </div>
        <div class="navbar-auth">
            {% if request.session.email %}
                <button id="seeProfileBtn" class="btn">See Profile</button>
                <a href="{% url 'logout' %}" class="btn btn-logout" onclick="return confirm('Are you sure you want to logout?');">Logout</a>
            {% else %}
                <a href="{% url 'login' %}" class="btn">Login</a>
                <a href="{% url 'register' %}" class="btn btn-register">Register</a>
            {% endif %}
        </div>
    </nav>

    <section class="course-list">
        <h1>All Courses</h1>

        <div class="search-sort-container">
            <form method="GET">
                <input type="text" name="search" placeholder="Search courses..." value="{{ search_query }}">
                <select name="sort">
                    <option value="name" {% if sort_by == 'name' %}selected{% endif %}>Sort by Name</option>
                    <option value="price" {% if sort_by == 'price' %}selected{% endif %}>Sort by Price</option>
                    <option value="course_length" {% if sort_by == 'course_length' %}selected{% endif %}>Sort by Length</option>
                </select>
                <button type="submit">Search</button>
            </form>
        </div>

        <div class="course-cards">
            {% for course in courses %}
            <div class="course-card">
                <img src="{{ course.thumbnail.url }}" alt="{{ course.name }}" class="course-thumbnail">
                <h2>{{ course.name }}</h2>
                <p>{{ course.description|truncatewords:20 }}</p>
                <p class="course-price">₹{{ course.get_final_priceget_final_price }}</p>
                {% if course.discount > 0 %}
                    <p class="course-discount">₹{{ course.discount }}</p>
                {% endif %}
                <a href="{% url 'course_detail' course.id %}" class="btn-see-more">See More</a>

            </div>
            {% empty %}
            <p>No courses found.</p>
            {% endfor %}
        </div>
    </section>

    <footer class="footer">
        <!-- Footer content -->
    </footer>

</body>
</html>
